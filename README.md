# 割り勘計算機

Next.js と TypeScript で構築された、飲み会やイベントの割り勘を素早く正確に計算するための Web アプリです。
サービス料や端数処理、支払者の指定など、現場で必要になる細かな条件を柔軟に設定できます。

## このアプリでできること

### 計算機能

- 合計金額とサービス料（パーセント / 固定額）を考慮した割り勘額の算出
- 均等割り・比率割り・金額指定・アイテム割りの 4 種類の分割方法
- 1 円 / 10 円 / 100 円単位での端数処理、または端数処理なしの選択
- 誰が支払いを立て替えたかを指定し、清算の支払いフローを自動作成

### 共有・出力機能

- **短縮 URL**: 長い URL を自動的に短縮し、共有しやすくします
- **QR コード**: 計算結果の QR コードを生成し、スマートフォンで簡単にアクセス可能
- **SNS 共有**: LINE、Facebook、X（旧 Twitter）で結果を共有
- **画像ダウンロード**: 計算結果を美しい明細書形式の画像としてダウンロード
- **CSV 出力**: 計算結果を CSV 形式でエクスポート

### その他の機能

- 計算結果のローカル保存（ブラウザに記憶）と自動復元
- 入力内容確認ページで設定内容を一覧表示
- PWA 対応によるホーム画面追加・オフライン利用

アプリの使い方や機能の詳細は、画面右上の「使い方ドキュメント」リンク、または `/docs` ページから閲覧できます。

## 画面構成

| 画面       | 説明                                                                                         |
| ---------- | -------------------------------------------------------------------------------------------- |
| `/`        | 割り勘条件の入力・計算を行うメインページ。結果の共有や出力もここから行えます                 |
| `/confirm` | 入力内容を一覧で確認するページ（ローカル保存された設定を表示）                               |
| `/result`  | 共有リンクからアクセスできる結果表示ページ。入力内容の確認と計算結果、清算方法が表示されます |
| `/docs`    | アプリの概要や操作手順をまとめたドキュメントページ                                           |

## 使い方

1. **基本情報の入力**: 合計金額とサービス料、端数処理方法、支払者を設定します。
2. **参加者の管理**: 参加者を追加 / 削除し、割り方に応じて比率や金額を入力します。
3. **計算の実行**: 「計算する」ボタンで結果を表示します。
4. **結果の共有・出力**:
   - **共有ボタン**: 短縮 URL、QR コード、SNS 共有（LINE、Facebook、X）、リンクコピーが利用可能
   - **画像ダウンロード**: 明細書形式の画像をダウンロード
   - **CSV 出力**: 計算結果を CSV ファイルとしてエクスポート
5. **確認ページ**: `/confirm` では直近の設定内容を一覧で確認できます。

## 技術スタック

- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **UI**: Tailwind CSS, shadcn/ui, Lucide React
- **PWA**: Web App Manifest, Service Worker
- **ライブラリ**:
  - react-share (SNS 共有)
  - qrcode.react (QR コード生成)
  - html2canvas (画像生成)

## 開発環境のセットアップ

```bash
npm install
npm run dev
```

ブラウザで `http://localhost:3000` を開いて動作を確認できます。

## 主なスクリプト

```bash
npm run dev    # 開発サーバーを起動
npm run build  # 本番ビルドを作成
npm start      # 本番ビルドを実行
npm run lint   # ESLint による静的解析
```

## 注意事項

### 短縮 URL 機能について

- 短縮 URL のデータは `.data/url-store.json` に保存されます
- 24 時間以上経過したエントリは自動的に削除されます
- 本番環境では、データベース（Redis、MongoDB など）の使用を推奨します

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。
